<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">  
			var currhandle=0;//判断操作是否完成
			if(window.DeviceMotionEvent){
				var speed = 15;  
				var x = y = z = lastX = lastY = lastZ = 0;  
				window.addEventListener('devicemotion', function(){  
					var acceleration =event.accelerationIncludingGravity;  
					x = acceleration.x;  
					y = acceleration.y;  
					z = acceleration.z;
					if(Math.abs(x-lastX) > speed || Math.abs(y-lastY) > speed || Math.abs(z-lastZ) > speed+10) {  
						if(currhandle==0){
							setbegin();//摇一摇事件触发后执行操作
							currhandle=1;
						}	
					}  
					lastX = x;  
					lastY = y;  
					lastZ = z;
				}, false);  
			}else{
				console.log("您的设备不支持重力感应事件！")
			}
			function setbegin(){//开始操作
				var color = new Array('#ff9', '#ff0', '#f00', '#000', '#00f', '#0ff');  
				document.body.style.backgroundColor = color[Math.round(Math.random()*10)%6];
				currhandle=0;
			}     
		</script>
	</body>
</html>
